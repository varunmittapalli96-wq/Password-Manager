from cryptography.fernet import Fernet
import json
import os

if not os.path.exists("key.key"):
    key = Fernet.generate_key()
    with open("key.key", "wb") as f:
        f.write(key)
else:
    with open("key.key", "rb") as f:
        key = f.read()

cipher = Fernet(key)

def save_password(site, password):
    encrypted = cipher.encrypt(password.encode())

    data = {}
    if os.path.exists("passwords.json"):
        with open("passwords.json", "r") as f:
            data = json.load(f)

    data[site] = encrypted.decode()

    with open("passwords.json", "w") as f:
        json.dump(data, f)

    print("üîê Password Saved!")

def get_password(site):
    with open("passwords.json", "r") as f:
        data = json.load(f)

    decrypted = cipher.decrypt(data[site].encode()).decode()
    print("Password:", decrypted)

site = input("Enter site: ")
pwd = input("Enter password: ")
save_password(site, pwd)
get_password(site)